<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="io.renren.modules.sys.dao.TransportDao">

    <!-- 可根据自己的需求，是否要使用 -->
    <resultMap type="io.renren.modules.sys.entity.TransportEntity" id="transportMap">
        <result property="id" column="id"/>
        <result property="materialId" column="material_id"/>
        <result property="source" column="source"/>
        <result property="type" column="type"/>
        <result property="distance" column="distance"/>
        <result property="version" column="version"/>
        <result property="userId" column="user_id"/>
        <result property="createdTime" column="created_time"/>
        <result property="weight" column="weight"/>
        <result property="materialName" column="material_name"/>
        <result property="flag" column="flag"/>
        <result property="parentId" column="parent_id"/>
        <result property="prId" column="pr_id"/>
        <result property="prName" column="pr_name"/>
    </resultMap>
    <select id="getMaterialByBatch" parameterType="java.util.Map" resultMap="transportMap">
        SELECT * FROM
        transport
        WHERE 1=1
        and user_id=#{userId} AND version=#{version} AND flag=#{flag} AND pr_id=#{prId}
        <if test="parentId != null">
            AND parent_id=#{parentId}
        </if>

    </select>


</mapper>