<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="io.renren.modules.prManage.dao.ProductDefineDao">

    <!-- 可根据自己的需求，是否要使用 -->
    <resultMap type="io.renren.modules.prManage.entity.ProductDefineEntity" id="productDefineMap">
        <result property="id" column="id"/>
        <result property="prName" column="pr_name"/>
        <result property="companyName" column="company_name"/>
        <result property="modelType" column="model_type"/>
        <result property="productType" column="product_type"/>
        <result property="shape" column="shape"/>
        <result property="functionUnit" column="function_unit"/>
        <result property="evalNum" column="eval_num"/>
        <result property="systemBoundary" column="system_boundary"/>
        <result property="year" column="year"/>
        <result property="industryId" column="industry_id"/>
        <result property="userId" column="user_id"/>
        <result property="insertTime" column="insert_time"/>
        <result property="userName" column="username"/>
        <result property="industryName" column="second_name"/>
    </resultMap>
    <select id="getQueryList" parameterType="java.util.HashMap" resultMap="productDefineMap">
        SELECT * FROM product_define p LEFT JOIN sys_user u on p.user_id = u.user_id LEFT JOIN dict d on p.industry_id =
        d.second_id WHERE
        <if test='"userid" == NULL'>
            p.user_id = #{userid}
        </if>
        industry_id = #{industryId} AND p.pr_name LIKE "%"#{prName}"%"
    </select>
    <select id="getPrByUserId" resultType="io.renren.modules.prManage.entity.ProductDefineEntity"
            parameterType="java.lang.Long">
        SELECT * FROM product_define
        where user_id=#{userId}
    </select>
    <delete id="delById" parameterType="java.util.List">
        delete from product_define where id in
        <foreach collection="list" item="item" index="index" separator="," open="(" close=")">
            #{item}
        </foreach>
    </delete>
</mapper>